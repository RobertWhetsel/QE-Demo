<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platform Admin Dashboard - Quantum Eye</title>
    
    <!-- Import paths -->
    <script type="module">
        import paths from '/config/paths.js';
        window.paths = paths; // Make paths available globally

        // Load CSS files in correct order
        const cssPaths = paths.getCssPaths();
        cssPaths.forEach(href => {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = href;
            document.head.appendChild(link);
        });

        // Set logo source immediately after paths is loaded
        window.addEventListener('DOMContentLoaded', () => {
            const logoPath = paths.getAssetPath('logo');
            document.getElementById('logoImg').src = logoPath;
        });
    </script>
    
    <!-- Initialize application state -->
    <script type="module">
        const init = paths.resolve('src/services/init.js');
        document.write(`<script type="module" src="${init}"><\/script>`);
    </script>
</head>
<body class="page">
    <!-- Include shared layout -->
    <div id="layout-container"></div>

    <div class="page__container">
        <div class="content-area">
            <div class="dashboard-container">
                <h1 class="page-title">Platform Admin Dashboard</h1>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="userCount">0</div>
                        <div class="stat-label">Total Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="activeUsers">0</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="pendingTasks">0</div>
                        <div class="stat-label">Pending Tasks</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-button" id="createTeam">Create Team</button>
                    <button class="action-button" id="manageUsers">Manage Users</button>
                    <button class="action-button" id="viewReports">View Reports</button>
                </div>

                <div class="dashboard-section">
                    <h2>Recent Activity</h2>
                    <div id="activityLog"></div>
                </div>

                <div class="dashboard-section">
                    <h2>System Status</h2>
                    <div id="systemStatus"></div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { PlatformAdmin } from '/src/controllers/admin/platformadmin.js';
        
        // Initialize page after app is initialized
        function initPage() {
            new PlatformAdmin();
        }

        // Wait for app initialization before starting
        document.addEventListener('appInitialized', initPage);
    </script>
</body>
</html>
